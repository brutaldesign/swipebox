/*! Swipebox v1.4.4 | Constantin Saguin csag.co | MIT License | github.com/brutaldesign/swipebox */
;(function(b,a,c,d){c.swipebox=function(i,s){var r,m={useCSS:true,useSVG:true,initialIndexOnArray:0,removeBarsOnMobile:true,hideCloseButtonOnMobile:false,hideBarsDelay:3000,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,afterMedia:null,nextSlide:null,prevSlide:null,loopAtEnd:false,autoplayVideos:false,queryStringData:{},toggleClassOnLoad:"",closeOnBack:false},p=this,e=[],f,j=i.selector,q=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),l=q!==null||a.createTouch!==d||("ontouchstart" in b)||("onmsgesturechange" in b)||navigator.msMaxTouchPoints,n=!!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,h=b.innerWidth?b.innerWidth:c(b).width(),k=b.innerHeight?b.innerHeight:c(b).height(),g=0,o='<div id="swipebox-overlay">					<div id="swipebox-container">						<div id="swipebox-slider"></div>						<div id="swipebox-top-bar">							<div id="swipebox-title"></div>						</div>						<div id="swipebox-bottom-bar">							<div id="swipebox-arrows">								<a id="swipebox-prev"></a>								<a id="swipebox-next"></a>							</div>						</div>						<a id="swipebox-close"></a>					</div>			</div>';p.settings={};c.swipebox.close=function(){r.closeSlide()};c.swipebox.extend=function(){return r};p.init=function(){p.settings=c.extend({},m,s);if(c.isArray(i)){e=i;r.target=c(b);r.init(p.settings.initialIndexOnArray)}else{c(a).on("click",j,function(v){if(v.target.parentNode.className==="slide current"){return false}if(!c.isArray(i)){r.destroy();f=c(j);r.actions()}e=[];var t,u,w;if(!w){u="data-rel";w=c(this).attr(u)}if(!w){u="rel";w=c(this).attr(u)}if(w&&w!==""&&w!=="nofollow"){f=c(j).filter("["+u+'="'+w+'"]')}else{f=c(j)}f.each(function(){var y=null,x=null;if(c(this).attr("title")){y=c(this).attr("title")}if(c(this).attr("href")){x=c(this).attr("href")}e.push({href:x,title:y})});t=f.index(c(this));v.preventDefault();v.stopPropagation();r.target=c(v.target);r.init(t)})}};r={init:function(t){if(p.settings.beforeOpen){p.settings.beforeOpen()}this.target.trigger("swipebox-start");c.swipebox.isOpen=true;this.build();this.openSlide(t);this.openMedia(t);this.preloadMedia(t+1);this.preloadMedia(t-1);if(p.settings.afterOpen){p.settings.afterOpen(t)}},build:function(){var u=this,t;c("body").append(o);if(n&&p.settings.useSVG===true){t=c("#swipebox-close").css("background-image");t=t.replace("png","svg");c("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":t})}if(q&&p.settings.removeBarsOnMobile){c("#swipebox-bottom-bar, #swipebox-top-bar").remove()}c.each(e,function(){c("#swipebox-slider").append('<div class="slide"></div>')});u.setDim();u.actions();if(l){u.gesture()}u.keyboard();u.animBars();u.resize()},setDim:function(){var v,t,u={};if("onorientationchange" in b){b.addEventListener("orientationchange",function(){if(b.orientation===0){v=h;t=k}else{if(b.orientation===90||b.orientation===-90){v=k;t=h}}},false)}else{v=b.innerWidth?b.innerWidth:c(b).width();t=b.innerHeight?b.innerHeight:c(b).height()}u={width:v,height:t};c("#swipebox-overlay").css(u)},resize:function(){var t=this;c(b).resize(function(){t.setDim()}).resize()},supportTransition:function(){var u="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),t;for(t=0;t<u.length;t++){if(a.createElement("div").style[u[t]]!==d){return u[t]}}return false},doCssTrans:function(){if(p.settings.useCSS&&this.supportTransition()){return true}},gesture:function(){var D=this,C,F,E,w,y,A,x=false,v=false,z=10,B=50,G={},t={},H=c("#swipebox-top-bar, #swipebox-bottom-bar"),u=c("#swipebox-slider");H.addClass("visible-bars");D.setTimeout();c("body").bind("touchstart",function(I){c(this).addClass("touching");C=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current"));t=I.originalEvent.targetTouches[0];G.pageX=I.originalEvent.targetTouches[0].pageX;G.pageY=I.originalEvent.targetTouches[0].pageY;c("#swipebox-slider").css({"-webkit-transform":"translate3d("+g+"%, 0, 0)",transform:"translate3d("+g+"%, 0, 0)"});c(".touching").bind("touchmove",function(K){K.preventDefault();K.stopPropagation();t=K.originalEvent.targetTouches[0];if(!v){y=E;E=t.pageY-G.pageY;if(Math.abs(E)>=B||x){var J=0.75-Math.abs(E)/u.height();u.css({top:E+"px"});u.css({opacity:J});x=true}}w=F;F=t.pageX-G.pageX;A=F*100/h;if(!v&&!x&&Math.abs(F)>=z){c("#swipebox-slider").css({"-webkit-transition":"",transition:""});v=true}if(v){if(0<F){if(0===C){c("#swipebox-overlay").addClass("leftSpringTouch")}else{c("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");c("#swipebox-slider").css({"-webkit-transform":"translate3d("+(g+A)+"%, 0, 0)",transform:"translate3d("+(g+A)+"%, 0, 0)"})}}else{if(0>F){if(e.length===C+1){c("#swipebox-overlay").addClass("rightSpringTouch")}else{c("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");c("#swipebox-slider").css({"-webkit-transform":"translate3d("+(g+A)+"%, 0, 0)",transform:"translate3d("+(g+A)+"%, 0, 0)"})}}}}});return false}).bind("touchend",function(I){I.preventDefault();I.stopPropagation();c("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"});E=t.pageY-G.pageY;F=t.pageX-G.pageX;A=F*100/h;if(x){x=false;if(Math.abs(E)>=2*B&&Math.abs(E)>Math.abs(y)){var J=E>0?u.height():-u.height();u.animate({top:J+"px",opacity:0},300,function(){D.closeSlide()})}else{u.animate({top:0,opacity:1},300)}}else{if(v){v=false;if(F>=z&&F>=w){D.getPrev()}else{if(F<=-z&&F<=w){D.getNext()}}}else{if(!H.hasClass("visible-bars")){D.showBars();D.setTimeout()}else{D.clearTimeout();D.hideBars()}}}c("#swipebox-slider").css({"-webkit-transform":"translate3d("+g+"%, 0, 0)",transform:"translate3d("+g+"%, 0, 0)"});c("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch");c(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(p.settings.hideBarsDelay>0){var t=this;t.clearTimeout();t.timeout=b.setTimeout(function(){t.hideBars()},p.settings.hideBarsDelay)}},clearTimeout:function(){b.clearTimeout(this.timeout);this.timeout=null},showBars:function(){var t=c("#swipebox-top-bar, #swipebox-bottom-bar");if(this.doCssTrans()){t.addClass("visible-bars")}else{c("#swipebox-top-bar").animate({top:0},500);c("#swipebox-bottom-bar").animate({bottom:0},500);setTimeout(function(){t.addClass("visible-bars")},1000)}},hideBars:function(){var t=c("#swipebox-top-bar, #swipebox-bottom-bar");if(this.doCssTrans()){t.removeClass("visible-bars")}else{c("#swipebox-top-bar").animate({top:"-50px"},500);c("#swipebox-bottom-bar").animate({bottom:"-50px"},500);setTimeout(function(){t.removeClass("visible-bars")},1000)}},animBars:function(){var u=this,t=c("#swipebox-top-bar, #swipebox-bottom-bar");t.addClass("visible-bars");u.setTimeout();c("#swipebox-slider").click(function(){if(!t.hasClass("visible-bars")){u.showBars();u.setTimeout()}});c("#swipebox-bottom-bar").hover(function(){u.showBars();t.addClass("visible-bars");u.clearTimeout()},function(){if(p.settings.hideBarsDelay>0){t.removeClass("visible-bars");u.setTimeout()}})},keyboard:function(){var t=this;c(b).bind("keyup",function(u){u.preventDefault();u.stopPropagation();if(u.keyCode===37){t.getPrev()}else{if(u.keyCode===39){t.getNext()}else{if(u.keyCode===27){t.closeSlide()}}}})},actions:function(){var v=this,t="touchend click";if(e.length<2){c("#swipebox-bottom-bar").hide();if(d===e[1]){c("#swipebox-top-bar").hide()}}else{c("#swipebox-prev").bind(t,function(w){w.preventDefault();w.stopPropagation();v.getPrev();v.setTimeout()});c("#swipebox-next").bind(t,function(w){w.preventDefault();w.stopPropagation();v.getNext();v.setTimeout()})}c("#swipebox-close").bind(t,function(){v.closeSlide()});if(p.settings.closeOnBack&&b.onpopstate===null){var u=a.location.href;b.onpopstate=function(){b.onpopstate=null;b.location.replace(u);v.closeSlide()}}},setSlide:function(u,t){t=t||false;var v=c("#swipebox-slider");g=-u*100;if(this.doCssTrans()){v.css({"-webkit-transform":"translate3d("+(-u*100)+"%, 0, 0)",transform:"translate3d("+(-u*100)+"%, 0, 0)"})}else{v.animate({left:(-u*100)+"%"})}c("#swipebox-slider .slide").removeClass("current");c("#swipebox-slider .slide").eq(u).addClass("current");this.setTitle(u);if(t){v.fadeIn()}c("#swipebox-prev, #swipebox-next").removeClass("disabled");if(u===0){c("#swipebox-prev").addClass("disabled")}else{if(u===e.length-1&&p.settings.loopAtEnd!==true){c("#swipebox-next").addClass("disabled")}}},openSlide:function(t){c("html").addClass("swipebox-html");if(l){c("html").addClass("swipebox-touch");if(p.settings.hideCloseButtonOnMobile){c("html").addClass("swipebox-no-close-button")}}else{c("html").addClass("swipebox-no-touch")}c(b).trigger("resize");this.setSlide(t,true)},preloadMedia:function(t){var u=this,v=null;if(e[t]!==d){v=e[t].href}if(!u.isVideo(v)){setTimeout(function(){u.openMedia(t)},1000)}else{u.openMedia(t)}},openMedia:function(u){var v=this,w,t;if(e[u]!==d){w=e[u].href}if(u<0||u>=e.length){return false}t=c("#swipebox-slider .slide").eq(u);if(!v.isVideo(w)){t.addClass("slide-loading");v.loadMedia(w,function(){t.removeClass("slide-loading");t.html(this);if(p.settings.afterMedia){p.settings.afterMedia(u)}})}else{t.html(v.getVideo(w));if(p.settings.afterMedia){p.settings.afterMedia(u)}}},setTitle:function(t){var u=null;c("#swipebox-title").empty();if(e[t]!==d){u=e[t].title}if(u){c("#swipebox-top-bar").show();c("#swipebox-title").append(u)}else{c("#swipebox-top-bar").hide()}},isVideo:function(t){if(t){if(t.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||t.match(/vimeo\.com\/([0-9]*)/)||t.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)){return true}if(t.toLowerCase().indexOf("swipeboxvideo=1")>=0){return true}}},parseUri:function(v,w){var u=a.createElement("a"),t={};u.href=decodeURIComponent(v);if(u.search){t=JSON.parse('{"'+u.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}')}if(c.isPlainObject(w)){t=c.extend(t,w,p.settings.queryStringData)}return c.map(t,function(y,x){if(y&&y>""){return encodeURIComponent(x)+"="+encodeURIComponent(y)}}).join("&")},getVideo:function(v){var x="",u=v.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),w=v.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),y=v.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),t="";if(u||w){if(w){u=w}t=r.parseUri(v,{autoplay:(p.settings.autoplayVideos?"1":"0"),v:""});x='<iframe width="560" height="315" src="//'+u[1]+"/embed/"+u[2]+"?"+t+'" frameborder="0" allowfullscreen></iframe>'}else{if(y){t=r.parseUri(v,{autoplay:(p.settings.autoplayVideos?"1":"0"),byline:"0",portrait:"0",color:p.settings.vimeoColor});x='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+y[1]+"?"+t+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'}else{x='<iframe width="560" height="315" src="'+v+'" frameborder="0" allowfullscreen></iframe>'}}return'<div class="swipebox-video-container" style="max-width:'+p.settings.videoMaxWidth+'px"><div class="swipebox-video">'+x+"</div></div>"},loadMedia:function(u,v){if(u.trim().indexOf("#")===0){v.call(c("<div>",{"class":"swipebox-inline-container"}).append(c(u).clone().toggleClass(p.settings.toggleClassOnLoad)))}else{if(!this.isVideo(u)){var t=c("<img>").on("load",function(){v.call(t)});t.attr("src",u)}}},getNext:function(){var u=this,v,t=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current"));if(t+1<e.length){v=c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src");c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",v);t++;u.setSlide(t);u.preloadMedia(t+1);if(p.settings.nextSlide){p.settings.nextSlide(t)}}else{if(p.settings.loopAtEnd===true){v=c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src");c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",v);t=0;u.preloadMedia(t);u.setSlide(t);u.preloadMedia(t+1);if(p.settings.nextSlide){p.settings.nextSlide(t)}}else{c("#swipebox-overlay").addClass("rightSpring");setTimeout(function(){c("#swipebox-overlay").removeClass("rightSpring")},500)}}},getPrev:function(){var t=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current")),u;if(t>0){u=c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src");c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",u);t--;this.setSlide(t);this.preloadMedia(t-1);if(p.settings.prevSlide){p.settings.prevSlide(t)}}else{c("#swipebox-overlay").addClass("leftSpring");setTimeout(function(){c("#swipebox-overlay").removeClass("leftSpring")},500)}},nextSlide:function(t){},prevSlide:function(t){},closeSlide:function(){if(p.settings.closeOnBack){b.onpopstate=null}c("html").removeClass("swipebox-html");c("html").removeClass("swipebox-touch");c(b).trigger("resize");this.destroy()},destroy:function(){c(b).unbind("keyup");c("body").unbind("touchstart");c("body").unbind("touchmove");c("body").unbind("touchend");c("#swipebox-slider").unbind();c("#swipebox-overlay").remove();if(!c.isArray(i)){i.removeData("_swipebox")}if(this.target){this.target.trigger("swipebox-destroy")}c.swipebox.isOpen=false;if(p.settings.afterClose){p.settings.afterClose()}}};p.init()};c.fn.swipebox=function(f){if(!c.data(this,"_swipebox")){var e=new c.swipebox(this,f);this.data("_swipebox",e)}return this.data("_swipebox")}}(window,document,jQuery));