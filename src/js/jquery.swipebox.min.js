!function(a,b,$,c){$.swipebox=function(e,h){$(e).addClass("swipebox");var f,i,j={useCSS:!0,useSVG:!0,initialIndexOnArray:0,removeBarsOnMobile:!0,hideCloseButtonOnMobile:!1,hideBarsDelay:3e3,videoMaxWidth:1140,vimeoColor:"cccccc",beforeOpen:null,afterOpen:null,afterClose:null,afterMedia:null,nextSlide:null,prevSlide:null,loopAtEnd:!1,autoplayVideos:!1,queryStringData:{},toggleClassOnLoad:"",titleAttribute:"title",captionAttribute:"data-caption"},d=this,k=[],l=".swipebox",g=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),m=null!==g||c!==b.createTouch||"ontouchstart"in a||"onmsgesturechange"in a||navigator.msMaxTouchPoints,n=!!b.createElementNS&&!!b.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,o=a.innerWidth?a.innerWidth:$(a).width(),p=a.innerHeight?a.innerHeight:$(a).height(),q=0;d.settings={},$.swipebox.close=function(){f.closeSlide()},$.swipebox.extend=function(){return f},d.init=function(){d.settings=$.extend({},j,h),Array.isArray(e)?(k=e,f.target=$(a),f.init(d.settings.initialIndexOnArray)):$(b).on("click",l,function(c){var g,b,a;if("slide current"===c.target.parentNode.className)return!1;Array.isArray(e)||(f.destroy(),i=$(l),f.actions()),k=[],a||(b="data-rel",a=$(this).attr(b)),a||(b="rel",a=$(this).attr(b)),(i=a&&""!==a&&"nofollow"!==a?$(l).filter("["+b+'="'+a+'"]'):$(l)).each(function(){var a=null,b=null,c=null;$(this).attr(d.settings.titleAttribute)&&(a=$(this).attr(d.settings.titleAttribute)),$(this).attr(d.settings.captionAttribute)&&(b=$(this).attr(d.settings.captionAttribute)),$(this).attr("href")&&(c=$(this).attr("href")),k.push({href:c,title:a,caption:b})}),g=i.index($(this)),c.preventDefault(),c.stopPropagation(),f.target=$(c.target),f.init(g)})},f={init:function(a){d.settings.beforeOpen&&d.settings.beforeOpen(),this.target.trigger("swipebox-start"),$.swipebox.isOpen=!0,this.build(),this.openSlide(a),this.openMedia(a),this.preloadMedia(a+1),this.preloadMedia(a-1),d.settings.afterOpen&&d.settings.afterOpen(a)},build:function(){var a;$("body").append('<div id="swipebox-overlay">					<div id="swipebox-container">						<div id="swipebox-slider"></div>						<div id="swipebox-top-bar">							<div id="swipebox-title"></div>						</div>						<div id="swipebox-bottom-bar">							<div id="swipebox-arrows">								<a id="swipebox-prev"></a>								<a id="swipebox-next"></a>							</div>						</div>						<a id="swipebox-close"></a>					</div>			</div>'),n&& !0===d.settings.useSVG&&(a=(a=$("#swipebox-close").css("background-image")).replace("png","svg"),$("#swipebox-prev, #swipebox-next, #swipebox-close").css({"background-image":a})),g&&d.settings.removeBarsOnMobile&&$("#swipebox-bottom-bar, #swipebox-top-bar").remove(),$.each(k,function(){$("#swipebox-slider").append('<div class="slide"></div>')}),this.setDim(),this.actions(),m&&this.gesture(),this.keyboard(),this.animBars(),this.resize()},setDim:function(){var b,c,d={};"onorientationchange"in a?a.addEventListener("orientationchange",function(){0===a.orientation?(b=o,c=p):(90===a.orientation|| -90===a.orientation)&&(b=p,c=o)},!1):(b=a.innerWidth?a.innerWidth:$(a).width(),c=a.innerHeight?a.innerHeight:$(a).height()),d={width:b,height:c},$("#swipebox-overlay").css(d)},resize:function(){var b=this;$(a).resize(function(){b.setDim()}).resize()},supportTransition:function(){var a,d="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" ");for(a=0;a<d.length;a++)if(c!==b.createElement("div").style[d[a]])return d[a];return!1},doCssTrans:function(){if(d.settings.useCSS&&this.supportTransition())return!0},gesture:function(){var c,d,e,f,g,h,a=this,i=!1,j=!1,l={},m={},b=$("#swipebox-top-bar, #swipebox-bottom-bar"),n=$("#swipebox-slider");b.addClass("visible-bars"),a.setTimeout(),$("body").bind("touchstart",function(a){return $(this).addClass("touching"),c=$("#swipebox-slider .slide").index($("#swipebox-slider .slide.current")),m=a.originalEvent.targetTouches[0],l.pageX=a.originalEvent.targetTouches[0].pageX,l.pageY=a.originalEvent.targetTouches[0].pageY,$("#swipebox-slider").css({"-webkit-transform":"translate3d("+q+"%, 0, 0)",transform:"translate3d("+q+"%, 0, 0)"}),$(".touching").bind("touchmove",function(a){if(a.preventDefault(),a.stopPropagation(),m=a.originalEvent.targetTouches[0],!j&&(g=e,Math.abs(e=m.pageY-l.pageY)>=50||i)){var b=.75-Math.abs(e)/n.height();n.css({top:e+"px"}),n.css({opacity:b}),i=!0}f=d,h=100*(d=m.pageX-l.pageX)/o,!j&&!i&&Math.abs(d)>=10&&($("#swipebox-slider").css({"-webkit-transition":"",transition:""}),j=!0),j&&(0<d?0===c?$("#swipebox-overlay").addClass("leftSpringTouch"):($("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),$("#swipebox-slider").css({"-webkit-transform":"translate3d("+(q+h)+"%, 0, 0)",transform:"translate3d("+(q+h)+"%, 0, 0)"})):0>d&&(k.length===c+1?$("#swipebox-overlay").addClass("rightSpringTouch"):($("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),$("#swipebox-slider").css({"-webkit-transform":"translate3d("+(q+h)+"%, 0, 0)",transform:"translate3d("+(q+h)+"%, 0, 0)"}))))}),!1}).bind("touchend",function(c){if(c.preventDefault(),c.stopPropagation(),$("#swipebox-slider").css({"-webkit-transition":"-webkit-transform 0.4s ease",transition:"transform 0.4s ease"}),e=m.pageY-l.pageY,d=m.pageX-l.pageX,h=100*d/o,i){if(i=!1,Math.abs(e)>=100&&Math.abs(e)>Math.abs(g)){var k=e>0?n.height():-n.height();n.animate({top:k+"px",opacity:0},300,function(){a.closeSlide()})}else n.animate({top:0,opacity:1},300)}else j?(j=!1,d>=10&&d>=f?a.getPrev():d<= -10&&d<=f&&a.getNext()):b.hasClass("visible-bars")?(a.clearTimeout(),a.hideBars()):(a.showBars(),a.setTimeout());$("#swipebox-slider").css({"-webkit-transform":"translate3d("+q+"%, 0, 0)",transform:"translate3d("+q+"%, 0, 0)"}),$("#swipebox-overlay").removeClass("leftSpringTouch").removeClass("rightSpringTouch"),$(".touching").off("touchmove").removeClass("touching")})},setTimeout:function(){if(d.settings.hideBarsDelay>0){var b=this;b.clearTimeout(),b.timeout=a.setTimeout(function(){b.hideBars()},d.settings.hideBarsDelay)}},clearTimeout:function(){a.clearTimeout(this.timeout),this.timeout=null},showBars:function(){var a=$("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?a.addClass("visible-bars"):($("#swipebox-top-bar").animate({top:0},500),$("#swipebox-bottom-bar").animate({bottom:0},500),setTimeout(function(){a.addClass("visible-bars")},1e3))},hideBars:function(){var a=$("#swipebox-top-bar, #swipebox-bottom-bar");this.doCssTrans()?a.removeClass("visible-bars"):($("#swipebox-top-bar").animate({top:"-50px"},500),$("#swipebox-bottom-bar").animate({bottom:"-50px"},500),setTimeout(function(){a.removeClass("visible-bars")},1e3))},animBars:function(){var a=this,b=$("#swipebox-top-bar, #swipebox-bottom-bar");b.addClass("visible-bars"),a.setTimeout(),$("#swipebox-slider").click(function(){b.hasClass("visible-bars")||(a.showBars(),a.setTimeout())}),$("#swipebox-bottom-bar").hover(function(){a.showBars(),b.addClass("visible-bars"),a.clearTimeout()},function(){d.settings.hideBarsDelay>0&&(b.removeClass("visible-bars"),a.setTimeout())})},keyboard:function(){var b=this;$(a).bind("keyup",function(a){a.preventDefault(),a.stopPropagation(),37===a.keyCode?b.getPrev():39===a.keyCode?b.getNext():27===a.keyCode&&b.closeSlide()})},actions:function(){var b=this,a="touchend click";k.length<2?($("#swipebox-bottom-bar").hide(),c===k[1]&&$("#swipebox-top-bar").hide()):($("#swipebox-prev").bind(a,function(a){a.preventDefault(),a.stopPropagation(),b.getPrev(),b.setTimeout()}),$("#swipebox-next").bind(a,function(a){a.preventDefault(),a.stopPropagation(),b.getNext(),b.setTimeout()})),$("#swipebox-close").bind(a,function(a){a.preventDefault(),a.stopPropagation(),b.closeSlide()})},setSlide:function(a,b){b=b||!1;var c=$("#swipebox-slider");q=-(100*a),this.doCssTrans()?c.css({"-webkit-transform":"translate3d("+ -(100*a)+"%, 0, 0)",transform:"translate3d("+ -(100*a)+"%, 0, 0)"}):c.animate({left:-(100*a)+"%"}),$("#swipebox-slider .slide").removeClass("current"),$("#swipebox-slider .slide").eq(a).addClass("current"),this.setTitle(a),b&&c.fadeIn(),$("#swipebox-prev, #swipebox-next").removeClass("disabled"),0===a?$("#swipebox-prev").addClass("disabled"):a===k.length-1&& !0!==d.settings.loopAtEnd&&$("#swipebox-next").addClass("disabled")},openSlide:function(b){$("html").addClass("swipebox-html"),m?($("html").addClass("swipebox-touch"),d.settings.hideCloseButtonOnMobile&&$("html").addClass("swipebox-no-close-button")):$("html").addClass("swipebox-no-touch"),$(a).trigger("resize"),this.setSlide(b,!0)},preloadMedia:function(a){var b=this,d=null;c!==k[a]&&(d=k[a].href),b.isVideo(d)?b.openMedia(a):setTimeout(function(){b.openMedia(a)},1e3)},openMedia:function(a){var b,e;if(c!==k[a]&&(b=k[a].href),a<0||a>=k.length)return!1;e=$("#swipebox-slider .slide").eq(a),this.isVideo(b)?(e.html(this.getVideo(b)),d.settings.afterMedia&&d.settings.afterMedia(a)):(e.addClass("slide-loading"),this.loadMedia(b,function(){e.removeClass("slide-loading"),e.html(this),d.settings.afterMedia&&d.settings.afterMedia(a)}))},setTitle:function(d){var a=null,b=null;if($("#swipebox-title").empty(),c!==k[d]&&(a=k[d].title,b=k[d].caption),a||b){if($("#swipebox-top-bar").show(),a){var e=$("<div></div>").addClass("title").html(a);$("#swipebox-title").append(e)}if(b){var f=$("<div></div>").addClass("caption").html(b);$("#swipebox-title").append(f)}}else $("#swipebox-top-bar").hide()},isVideo:function(a){if(a&&(a.match(/(youtube\.com|youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/)||a.match(/vimeo\.com\/([0-9]*)/)||a.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)||a.toLowerCase().indexOf("swipeboxvideo=1")>=0))return!0},parseUri:function(f,e){var c=b.createElement("a"),a={};return c.href=decodeURIComponent(f),c.search&&(a=JSON.parse('{"'+c.search.toLowerCase().replace("?","").replace(/&/g,'","').replace(/=/g,'":"')+'"}')),$.isPlainObject(e)&&(a=$.extend(a,e,d.settings.queryStringData)),$.map(a,function(a,b){if(a&&a>"")return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&")},getVideo:function(a){var c="",b=a.match(/((?:www\.)?youtube\.com|(?:www\.)?youtube-nocookie\.com)\/watch\?v=([a-zA-Z0-9\-_]+)/),g=a.match(/(?:www\.)?youtu\.be\/([a-zA-Z0-9\-_]+)/),h=a.match(/(?:www\.)?vimeo\.com\/([0-9]*)/),e="";return b||g?(g&&(b=g),console.log(b),e=f.parseUri(a,{autoplay:d.settings.autoplayVideos?"1":"0",v:""}),c='<iframe width="560" height="315" src="https://'+b[1]+"/embed/"+b[2]+"?"+e+'" frameborder="0" allowfullscreen></iframe>'):h?(e=f.parseUri(a,{autoplay:d.settings.autoplayVideos?"1":"0",byline:"0",portrait:"0",color:d.settings.vimeoColor}),c='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+h[1]+"?"+e+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>'):c='<iframe width="560" height="315" src="'+a+'" frameborder="0" allowfullscreen></iframe>','<div class="swipebox-video-container" style="max-width:'+d.settings.videoMaxWidth+'px"><div class="swipebox-video">'+c+"</div></div>"},loadMedia:function(a,b){if(0===a.trim().indexOf("#"))b.call($("<div>",{class:"swipebox-inline-container"}).append($(a).clone().toggleClass(d.settings.toggleClassOnLoad)));else if(!this.isVideo(a)){var c=$("<img>").on("load",function(){b.call(c)});c.attr("src",a)}},getNext:function(){var b,a=$("#swipebox-slider .slide").index($("#swipebox-slider .slide.current"));a+1<k.length?(b=$("#swipebox-slider .slide").eq(a).contents().find("iframe").attr("src"),$("#swipebox-slider .slide").eq(a).contents().find("iframe").attr("src",b),a++,this.setSlide(a),this.preloadMedia(a+1),d.settings.nextSlide&&d.settings.nextSlide(a)):!0===d.settings.loopAtEnd?(b=$("#swipebox-slider .slide").eq(a).contents().find("iframe").attr("src"),$("#swipebox-slider .slide").eq(a).contents().find("iframe").attr("src",b),a=0,this.preloadMedia(a),this.setSlide(a),this.preloadMedia(a+1),d.settings.nextSlide&&d.settings.nextSlide(a)):($("#swipebox-overlay").addClass("rightSpring"),setTimeout(function(){$("#swipebox-overlay").removeClass("rightSpring")},500))},getPrev:function(){var b,a=$("#swipebox-slider .slide").index($("#swipebox-slider .slide.current"));a>0?(b=$("#swipebox-slider .slide").eq(a).contents().find("iframe").attr("src"),$("#swipebox-slider .slide").eq(a).contents().find("iframe").attr("src",b),a--,this.setSlide(a),this.preloadMedia(a-1),d.settings.prevSlide&&d.settings.prevSlide(a)):($("#swipebox-overlay").addClass("leftSpring"),setTimeout(function(){$("#swipebox-overlay").removeClass("leftSpring")},500))},nextSlide:function(a){},prevSlide:function(a){},closeSlide:function(){$("html").removeClass("swipebox-html"),$("html").removeClass("swipebox-touch"),$(a).trigger("resize"),this.destroy()},destroy:function(){$(a).unbind("keyup"),$("body").unbind("touchstart"),$("body").unbind("touchmove"),$("body").unbind("touchend"),$("#swipebox-slider").unbind(),$("#swipebox-overlay").remove(),Array.isArray(e)||e.removeData("_swipebox"),this.target&&this.target.trigger("swipebox-destroy"),$.swipebox.isOpen=!1,d.settings.afterClose&&d.settings.afterClose()}},d.init()},$.fn.swipebox=function(a){if(!$.data(this,"_swipebox")){var b=new $.swipebox(this,a);this.data("_swipebox",b)}return this.data("_swipebox")}}(window,document,jQuery)
