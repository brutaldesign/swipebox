/*! Swipebox v1.2.9 | Constantin Saguin csag.co | MIT License | github.com/brutaldesign/swipebox */
(function(b,a,c,d){c.swipebox=function(h,s){var q,l={useCSS:true,useSVG:true,initialIndexOnArray:0,closeBySwipe:true,hideBarsOnMobile:true,hideBarsDelay:3000,videoMaxWidth:1140,vimeoColor:"CCCCCC",beforeOpen:null,afterOpen:null,afterClose:null,loopAtEnd:false},o=this,e=[],f,i=h.selector,r=c(i),p=navigator.userAgent.match(/(iPad)|(iPhone)|(iPod)|(Android)|(PlayBook)|(BB10)|(BlackBerry)|(Opera Mini)|(IEMobile)|(webOS)|(MeeGo)/i),k=p!==null||a.createTouch!==d||("ontouchstart" in b)||("onmsgesturechange" in b)||navigator.msMaxTouchPoints,m=!!a.createElementNS&&!!a.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,g=b.innerWidth?b.innerWidth:c(b).width(),j=b.innerHeight?b.innerHeight:c(b).height(),n='<div id="swipebox-overlay">					<div id="swipebox-slider"></div>					<div id="swipebox-caption"></div>					<div id="swipebox-action">						<a id="swipebox-close"></a>						<a id="swipebox-prev"></a>						<a id="swipebox-next"></a>					</div>			</div>';
o.settings={};c.swipebox.close=function(){q.closeSlide();};c.swipebox.extend=function(){return q;};o.init=function(){o.settings=c.extend({},l,s);if(c.isArray(h)){e=h;
q.target=c(b);q.init(o.settings.initialIndexOnArray);}else{c(a).on("click",i,function(v){if(v.target.parentNode.className==="slide current"){return false;
}if(!c.isArray(h)){q.destroy();f=c(i);q.actions();}e=[];var t,u,w;if(!w){u="data-rel";w=c(this).attr(u);}if(!w){u="rel";w=c(this).attr(u);}if(w&&w!==""&&w!=="nofollow"){f=r.filter("["+u+'="'+w+'"]');
}else{f=c(i);}f.each(function(){var y=null,x=null;if(c(this).attr("title")){y=c(this).attr("title");}if(c(this).attr("href")){x=c(this).attr("href");}e.push({href:x,title:y});
});t=f.index(c(this));v.preventDefault();v.stopPropagation();q.target=c(v.target);q.init(t);});}};q={init:function(t){if(o.settings.beforeOpen){o.settings.beforeOpen();
}this.target.trigger("swipebox-start");c.swipebox.isOpen=true;this.build();this.openSlide(t);this.openMedia(t);this.preloadMedia(t+1);this.preloadMedia(t-1);
if(o.settings.afterOpen){o.settings.afterOpen();}},build:function(){var u=this,t;c("body").append(n);if(u.doCssTrans()){c("#swipebox-slider").css({"-webkit-transition":"left 0.4s ease","-moz-transition":"left 0.4s ease","-o-transition":"left 0.4s ease","-khtml-transition":"left 0.4s ease",transition:"left 0.4s ease"});
c("#swipebox-overlay").css({"-webkit-transition":"opacity 1s ease","-moz-transition":"opacity 1s ease","-o-transition":"opacity 1s ease","-khtml-transition":"opacity 1s ease",transition:"opacity 1s ease"});
c("#swipebox-action, #swipebox-caption").css({"-webkit-transition":"0.5s","-moz-transition":"0.5s","-o-transition":"0.5s","-khtml-transition":"0.5s",transition:"0.5s"});
}if(m&&o.settings.useSVG===true){t=c("#swipebox-action #swipebox-close").css("background-image");t=t.replace("png","svg");c("#swipebox-action #swipebox-prev,#swipebox-action #swipebox-next,#swipebox-action #swipebox-close").css({"background-image":t});
}if(p&&o.settings.hideBarsOnMobile===true){c("#swipebox-action, #swipebox-caption").hide();}c.each(e,function(){c("#swipebox-slider").append('<div class="slide"></div>');
});u.setDim();u.actions();if(k){u.gesture();}else{u.drag();}u.keyboard();u.animBars();u.resize();},setDim:function(){var v,t,u={};if("onorientationchange" in b){b.addEventListener("orientationchange",function(){if(b.orientation===0){v=g;
t=j;}else{if(b.orientation===90||b.orientation===-90){v=j;t=g;}}},false);}else{v=b.innerWidth?b.innerWidth:c(b).width();t=b.innerHeight?b.innerHeight:c(b).height();
}u={width:v,height:t};c("#swipebox-overlay").css(u);},resize:function(){var t=this;c(b).resize(function(){t.setDim();}).resize();},supportTransition:function(){var u="transition WebkitTransition MozTransition OTransition msTransition KhtmlTransition".split(" "),t;
for(t=0;t<u.length;t++){if(a.createElement("div").style[u[t]]!==d){return u[t];}}return false;},doCssTrans:function(){if(o.settings.useCSS&&this.supportTransition()){return true;
}},gesture:function(){var y=this,t=null,z=null,w=false,A=10,x=50,B={},u={},C=c("#swipebox-caption, #swipebox-action"),v=c("#swipebox-slider");C.addClass("visible-bars");
y.setTimeout();c("body").bind("touchstart",function(D){c(this).addClass("touching");u=D.originalEvent.targetTouches[0];B.pageX=D.originalEvent.targetTouches[0].pageX;
B.pageY=D.originalEvent.targetTouches[0].pageY;c(".touching").bind("touchmove",function(F){F.preventDefault();F.stopPropagation();u=F.originalEvent.targetTouches[0];
if(o.settings.closeBySwipe){z=u.pageY-B.pageY;if(Math.abs(z)>=x||w){var E=0.75-Math.abs(z)/v.height();v.css({top:z+"px"});v.css({opacity:E});w=true;}}});
return false;}).bind("touchend",function(D){D.preventDefault();D.stopPropagation();if(o.settings.closeBySwipe){if(v.css("opacity")<=0.5){var E=z>0?v.height():-v.height();
v.animate({top:E+"px",opacity:0},300,function(){y.closeSlide();});}else{v.animate({top:0,opacity:1},300);}if(w){w=false;return;}}t=u.pageX-B.pageX;if(t>=A){y.getPrev();
}else{if(t<=-A){y.getNext();}else{if(!C.hasClass("visible-bars")){y.showBars();y.setTimeout();}else{y.clearTimeout();y.hideBars();}}}c(".touching").off("touchmove").removeClass("touching");
});},drag:function(){var y=this,t=null,z=null,w=false,A=10,x=50,B={},u={},C=c("#swipebox-caption, #swipebox-action"),v=c("#swipebox-slider");C.addClass("visible-bars");
y.setTimeout();c("body").bind("mousedown",function(D){c(this).addClass("touching");u.pageX=D.pageX;u.pageY=D.pageY;B.pageX=D.pageX;B.pageY=D.pageY;c(".touching").bind("mousemove",function(F){F.preventDefault();
F.stopPropagation();u.pageX=F.pageX;u.pageY=F.pageY;if(o.settings.closeBySwipe){z=u.pageY-B.pageY;if(Math.abs(z)>=x||w){var E=0.75-Math.abs(z)/v.height();
v.css({top:z+"px"});v.css({opacity:E});w=true;}}});return false;}).bind("mouseup",function(D){D.preventDefault();D.stopPropagation();if(o.settings.closeBySwipe){if(v.css("opacity")<=0.5){var E=z>0?v.height():-v.height();
v.animate({top:E+"px",opacity:0},300,function(){y.closeSlide();});}else{v.animate({top:0,opacity:1},300);}if(w){w=false;return;}}t=u.pageX-B.pageX;if(t>=A){y.getPrev();
}else{if(t<=-A){y.getNext();}else{if(!C.hasClass("visible-bars")){y.showBars();y.setTimeout();}else{y.clearTimeout();y.hideBars();}}}c(".touching").off("mousemove").removeClass("touching");
});},setTimeout:function(){if(o.settings.hideBarsDelay>0){var t=this;t.clearTimeout();t.timeout=b.setTimeout(function(){t.hideBars();},o.settings.hideBarsDelay);
}},clearTimeout:function(){b.clearTimeout(this.timeout);this.timeout=null;},showBars:function(){var t=c("#swipebox-caption, #swipebox-action");if(this.doCssTrans()){t.addClass("visible-bars");
}else{c("#swipebox-caption").animate({top:0},500);c("#swipebox-action").animate({bottom:0},500);setTimeout(function(){t.addClass("visible-bars");},1000);
}},hideBars:function(){var t=c("#swipebox-caption, #swipebox-action");if(this.doCssTrans()){t.removeClass("visible-bars");}else{c("#swipebox-caption").animate({top:"-50px"},500);
c("#swipebox-action").animate({bottom:"-50px"},500);setTimeout(function(){t.removeClass("visible-bars");},1000);}},animBars:function(){var u=this,t=c("#swipebox-caption, #swipebox-action");
t.addClass("visible-bars");u.setTimeout();c("#swipebox-slider").click(function(){if(!t.hasClass("visible-bars")){u.showBars();u.setTimeout();}});c("#swipebox-action").hover(function(){u.showBars();
t.addClass("visible-bars");u.clearTimeout();},function(){if(o.settings.hideBarsDelay>0){t.removeClass("visible-bars");u.setTimeout();}});},keyboard:function(){var t=this;
c(b).bind("keyup",function(u){u.preventDefault();u.stopPropagation();if(u.keyCode===37){t.getPrev();}else{if(u.keyCode===39){t.getNext();}else{if(u.keyCode===27){t.closeSlide();
}}}});},actions:function(){var u=this,t="touchend click";if(e.length<2){c("#swipebox-prev, #swipebox-next").hide();}else{c("#swipebox-prev").bind(t,function(v){v.preventDefault();
v.stopPropagation();u.getPrev();u.setTimeout();});c("#swipebox-next").bind(t,function(v){v.preventDefault();v.stopPropagation();u.getNext();u.setTimeout();
});}c("#swipebox-close").bind(t,function(){u.closeSlide();});},setSlide:function(u,t){t=t||false;var v=c("#swipebox-slider");if(this.doCssTrans()){v.css({left:(-u*100)+"%"});
}else{v.animate({left:(-u*100)+"%"});}c("#swipebox-slider .slide").removeClass("current");c("#swipebox-slider .slide").eq(u).addClass("current");this.setTitle(u);
if(t){v.fadeIn();}c("#swipebox-prev, #swipebox-next").removeClass("disabled");if(u===0){c("#swipebox-prev").addClass("disabled");}else{if(u===e.length-1&&o.settings.loopAtEnd!=true){c("#swipebox-next").addClass("disabled");
}}},openSlide:function(t){c("html").addClass("swipebox-html");if(k){c("html").addClass("swipebox-touch");}c(b).trigger("resize");this.setSlide(t,true);
},preloadMedia:function(t){var u=this,v=null;if(e[t]!==d){v=e[t].href;}if(!u.isVideo(v)){setTimeout(function(){u.openMedia(t);},1000);}else{u.openMedia(t);
}},openMedia:function(t){var u=this,v=null;if(e[t]!==d){v=e[t].href;}if(t<0||t>=e.length){return false;}if(!u.isVideo(v)){u.loadMedia(v,function(){c("#swipebox-slider .slide").eq(t).html(this);
});}else{c("#swipebox-slider .slide").eq(t).html(u.getVideo(v));}},setTitle:function(t){var u=null;c("#swipebox-caption").empty();if(e[t]!==d){u=e[t].title;
}if(u){c("#swipebox-caption").append(u);}},isVideo:function(t){if(t){if(t.match(/youtube\.com\/watch\?v=([a-zA-Z0-9\-_]+)/)||t.match(/vimeo\.com\/([0-9]*)/)||t.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/)){return true;
}if(t.toLowerCase().indexOf("swipeboxvideo=1")>=0){return true;}}},getVideo:function(u){var w="",t=u.match(/watch\?v=([a-zA-Z0-9\-_]+)/),v=u.match(/youtu\.be\/([a-zA-Z0-9\-_]+)/),x=u.match(/vimeo\.com\/([0-9]*)/);
if(t||v){if(v){t=v;}w='<iframe width="560" height="315" src="//www.youtube.com/embed/'+t[1]+'" frameborder="0" allowfullscreen></iframe>';}else{if(x){w='<iframe width="560" height="315"  src="//player.vimeo.com/video/'+x[1]+"?byline=0&amp;portrait=0&amp;color="+o.settings.vimeoColor+'" frameborder="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen></iframe>';
}}if(v||v||x){}else{w='<iframe width="560" height="315" src="'+u+'" frameborder="0" allowfullscreen></iframe>';}return'<div class="swipebox-video-container" style="max-width:'+o.settings.videomaxWidth+'px"><div class="swipebox-video">'+w+"</div></div>";
},loadMedia:function(u,v){if(!this.isVideo(u)){var t=c("<img>").on("load",function(){v.call(t);});t.attr("src",u);}},getNext:function(){var u=this,t=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current"));
if(t+1<e.length){var v=c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src");c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",v);
t++;u.setSlide(t);u.preloadMedia(t+1);}else{if(o.settings.loopAtEnd===true){var v=c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src");
c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",v);t=0;u.preloadMedia(t);u.setSlide(t);u.preloadMedia(t+1);}else{c("#swipebox-slider").addClass("rightSpring");
setTimeout(function(){c("#swipebox-slider").removeClass("rightSpring");},500);}}},getPrev:function(){var t=c("#swipebox-slider .slide").index(c("#swipebox-slider .slide.current"));
if(t>0){var u=c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src");c("#swipebox-slider .slide").eq(t).contents().find("iframe").attr("src",u);
t--;this.setSlide(t);this.preloadMedia(t-1);}else{c("#swipebox-slider").addClass("leftSpring");setTimeout(function(){c("#swipebox-slider").removeClass("leftSpring");
},500);}},closeSlide:function(){c("html").removeClass("swipebox-html");c("html").removeClass("swipebox-touch");c(b).trigger("resize");this.destroy();},destroy:function(){c(b).unbind("keyup");
c("body").unbind("touchstart");c("body").unbind("touchmove");c("body").unbind("touchend");c("#swipebox-slider").unbind();c("#swipebox-overlay").remove();
if(!c.isArray(h)){h.removeData("_swipebox");}if(this.target){this.target.trigger("swipebox-destroy");}c.swipebox.isOpen=false;if(o.settings.afterClose){o.settings.afterClose();
}}};o.init();};c.fn.swipebox=function(f){if(!c.data(this,"_swipebox")){var e=new c.swipebox(this,f);this.data("_swipebox",e);}return this.data("_swipebox");
};}(window,document,jQuery));